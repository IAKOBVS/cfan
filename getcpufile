#!/bin/sh
files=$(echo /sys/class/thermal/thermal_zone[0-9]*/type)
for file in $files; do
	if grep -qF 'x86_pkg_temp' "$file"; then
		echo "#define CPU_TEMP_FILE \"$file\"" | sed 's/type/temp/'
		exit
	fi
done
echo "getcpufile: x86_pkg_temp not found. in $files!"
echo 'Need to manually add CPU_TEMP_FILE macro to cpu.generated.h.'
echo 'Example cpu.generated.h:'
echo '#define CPU_TEMP_FILE "/path/to/cpu_temp'
exit 1
